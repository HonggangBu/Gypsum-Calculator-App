<!DOCTYPE html>
<html>
<head>
    <!--
        Customize the content security policy in the meta tag below as needed. Add 'unsafe-inline' to default-src to enable inline JavaScript.
        For details, see http://go.microsoft.com/fwlink/?LinkID=617521
    -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/index.css">

    <script src="scripts/jquery-3.2.1.min.js"></script>
    <script src="scripts/bootstrap.min.js"></script>
    <script src="cordova.js"></script>
    <script src="scripts/platformOverrides.js"></script>
    <script src="scripts/index.js"></script>

    <title>Gypsum Calculator</title>
</head>

<body>
    <div>
        <div class="container-fluid" style="background-color:darkcyan;">
            <h2 class="text-center">
                <a href="#" class="pull-left" id="GoHome"><img src="images/cordova.png" class="img-rounded" alt="Logo" width="30" height="30"></a>
                <span style="font-size: x-large; font-weight:bolder; color: gold;">Gypsum Calculator</span>
            </h2>
        </div>
    </div>

    <div class="container-fluid">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#home" data-toggle="tab">About</a></li>
            <li><a href="#calculator" data-toggle="tab">Calculator</a></li>
            <li><a href="#formula" data-toggle="tab">Formula</a></li>
        </ul>
        <div class="tab-content">
            <div id="home" class="tab-pane fade in active">
                <br />
                <button data-toggle="collapse" data-target="#intro" class="collapseBtn">Brief Intro</button>
                <div id="intro" class="collapse">
                    <br />
                    <p>
                        Welcome to the NDSU gypsum requirement (GR) mobile app. The calculations are based on the equation of Oster et al. (1999).
                        To determine GR (in Mg/ha; e.g. 1 Mg/ha = 1.1 tons/acre) the equation requires knowledge of the 1) depth, D,
                        (in meters; e.g. 0.15 m = 6 inches) to which the gypsum will be applied, 2) the bulk density, Bd, of the soil (in Mg/m3; e.g. 1 Mg/m3 = 1 g/cm3; default value in the calculator is 1.47 Mg/m3),
                        3) the cation exchange capacity, CEC, of the soil (in mmolc/kg; e.g. 100 mmolc/kg = 10 cmolc/kg = 10 meq/kg), 4) the reaction efficiency factor, F,
                        which is unitless (e.g. choose 1.3 if the final ESP is 5 and  1.1 if the final ESP is 15 or greater), 5) the initial ESP, ESPi,
                        which is determined by a qualified laboratory (ESP is a % of the Na ions on the soil's exchange sites), 6) the target, final ESP, ESPf, and 7) the purity of the gypsum being used (in %).
                    </p>
                    <p>
                        You will need to adjust the final mass of gypsum based on the moisture content of the product you are using. For example,
                        if the moisture content is 20% then take GR x 1.2 to get the mass of moist gypsum needed to supply GR.
                    </p>
                    <p>
                        You can substitute the sodium adsorption ratio (SAR) determined from a saturated paste extract for the ESP if the ESP is less than 50.
                    </p>
                    <p>
                        The cost of applying gypsum will be much greater than the costs for determining the soil metrics outlined above so have your soils analyzed by your regional soil testing laboratory.
                        Depth of your soil sample should be great enough to understand the depth that gypsum should be incorporated.
                        Gypsum should be placed as near to the depth of sodic behavior as possible to maximize its effectiveness.
                    </p>
                    <p>
                        [Reference]<br />
                        <i>
                            Oster, J.D., I. Shainberg, and I.P. Abrol. 1999. Reclamation of salt-affected soils. In 806 Agricultural Drainage.
                            Agronomy Monograph no. 38. American Society of Agronomy, 807 Crop Science Society of America, Soil Science Society of America,
                            677 S. Segoe Rd. 808 Madison, WI 53711. USA. p.659-691.
                        </i>
                    </p>

                    <p style="background-color:antiquewhite;">[App Developer] <b>Honggang Bu</b></p>
                </div>

                <hr>
                <h5>For more information, please contact:</h5>
                <div>
                    <a href="https://www.ndsu.edu/soils/personnel/faculty/dr_tom_desutter/" target="_blank"><img src="images/DeSutter.jpg" alt="Dr. Tom DeSutter" class="photocss img-circle"></a>
                    <br />
                    <a href="https://www.ndsu.edu/soils/personnel/faculty/dr_tom_desutter/" target="_blank"><span id="TomName">Dr. Tom DeSutter</span></a>
                    <p style="font-size:small; font-weight:bold;">Associate Professor <br /> Soil Science Program Leader</p>
                </div>
                <br />

                <div id="contactInfo">
                    <p><u>Office:</u> <b>214 Walster Hall, Box 6050, NDSU</b></p>
                    <p><u>Phone:</u> <b>701-231-8690</b></p>
                    <p><u>Email:</u> <b>Thomas.Desutter@ndsu.edu</b></p>
                </div>

            </div>
            <div id="calculator" class="tab-pane fade">
                <br />
                <h4 id="desc">Input each required parameter value below to conduct gypsum requirement calculation. All fields are required.</h4>
                <hr>

                <div class="paddingleft">
                    <label for="depth">Soil Depth (m)</label><br />
                    <div class="wrapper">
                        <input type="text" id="depthInput" placeholder="positive value">
                        <button id="depthClearBtn" class="clearBtn"><span>X</span></button>
                    </div>
                </div>
                <br />
                <div class="paddingleft">
                    <label for="density">Soil Bulk Density (Mg m<sup>-3</sup>)</label><br />
                    <div class="wrapper">
                        <input type="text" id="densityInput" placeholder="positive value">
                        <button id="densityClearBtn" class="clearBtn"><span>X</span></button>
                    </div>
                </div>
                <br />
                <div class="paddingleft">
                    <label for="cec">CEC (mmol<sub>c</sub> kg<sup>-1</sup>)</label><br />
                    <div class="wrapper">
                        <input type="text" id="cecInput" placeholder="positive value">
                        <button id="cecClearBtn" class="clearBtn"><span>X</span></button>
                    </div>
                </div>
                <br />
                <div class="paddingleft">
                    <label for="purity">Gypsum Purity (%)</label><br />
                    <div class="wrapper">
                        <input type="text" id="purityInput" placeholder="value between 0 and 100">
                        <button id="purityClearBtn" class="clearBtn"><span>X</span></button>
                    </div>
                </div>
                <br />
                <div id="esp-sar-div">
                    <label class="radio-inline">
                        <input type="radio" name="optradio" checked="checked" value="esp"><span class="radiotext">use ESP</span>
                    </label>
                    <label class="radio-inline">
                        <input type="radio" name="optradio" value="sar"><span class="radiotext">use SAR</span>
                    </label>
                    <br /><br />
                    <div id="espInputDiv">
                        <div class="radiotext">
                            <label for="espi">Initial ESP (%)</label><br />
                            <div class="wrapper">
                                <input type="text" id="espiInput" placeholder="value between 0 and 100">
                                <button id="espiClearBtn" class="clearBtn"><span>X</span></button>
                            </div>
                        </div>
                        <br />
                        <div class="radiotext">
                            <label for="espf">Target ESP (%)</label><br />
                            <div class="wrapper">
                                <input type="text" id="espfInput" placeholder="value between 0 and 100">
                                <button id="espfClearBtn" class="clearBtn"><span>X</span></button>
                            </div>
                        </div>
                    </div>
                    <div id="sarInputDiv" style="display:none;">
                        <div class="radiotext">
                            <label for="sari">Initial SAR (%)</label><br />
                            <div class="wrapper">
                                <input type="text" id="sariInput" placeholder="value between 0 and 100">
                                <button id="sariClearBtn" class="clearBtn"><span>X</span></button>
                            </div>
                        </div>
                        <br />
                        <div class="radiotext">
                            <label for="sarf">Target SAR (%)</label><br />
                            <div class="wrapper">
                                <input type="text" id="sarfInput" placeholder="value between 0 and 100">
                                <button id="sarfClearBtn" class="clearBtn"><span>X</span></button>
                            </div>
                        </div>
                    </div>
                </div>
                <br />
                <div style="float:right;">
                    <button id="calcBtn" type="button" class="btn btn-primary btn-lg"><span>Calculate</span></button><br />
                    <label>Calculation result is displayed below.</label>
                </div>

                <hr>

                <div id="resultDiv">
                    <label>Gypsum Requirement (Mg ha<sup>-1</sup>)</label><br />
                    <span id="resultSpan"></span>
                </div>
                <br />
                <br />
                <br />

            </div>
            <div id="formula" class="tab-pane fade">
                <br />
                <div style="margin-bottom:80px !important;">
                    You can use either

                    <p id="fmla">GR<sub>adj</sub>=0.86*F*D*&rho;<sub>b</sub>*CEC*(ESP<sub>i</sub>-ESP<sub>f</sub>)/p</p>

                    or

                    <p id="fmla">GR<sub>adj</sub>=0.86*F*D*&rho;<sub>b</sub>*CEC*(SAR<sub>i</sub>-SAR<sub>f</sub>)/p</p>

                    where <br />
                    <hr>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Symbol</th>
                                <th>Definition</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><i>GR<sub>adj</sub></i></td>
                                <td>Amount of gypsum needed. Adjusted by its purity. <br />unit: Mg ha<sup>-1</sup></td>
                            </tr>
                            <tr>
                                <td><i>ESP</i></td>
                                <td>exchangeable sodium percentage, unit: %</td>
                            </tr>
                            <tr>
                                <td><i>ESP<sub>i</sub></i></td>
                                <td>initial <i>ESP</i> level</td>
                            </tr>
                            <tr>
                                <td><i>ESP<sub>f</sub></i></td>
                                <td>final or target <i>ESP</i> level</td>
                            </tr>
                            <tr>
                                <td><i>SAR</i></td>
                                <td>sodium adsorption ratio, unit: %</td>
                            </tr>
                            <tr>
                                <td><i>SAR<sub>i</sub></i></td>
                                <td>initial <i>SAR</i> level</td>
                            </tr>
                            <tr>
                                <td><i>SAR<sub>f</sub></i></td>
                                <td>final or target <i>SAR</i> level</td>
                            </tr>
                            <tr>
                                <td><i>CEC</i></td>
                                <td>cation exchange capacity, unit: mmol<sub>c</sub> kg<sup>-1</sup></td>
                            </tr>
                            <tr>
                                <td><i>D</i></td>
                                <td>soil depth, unit: m</td>
                            </tr>
                            <tr>
                                <td><i>&rho;<sub>b</sub></i></td>
                                <td>soil bulk density, unit: Mg m<sup>-3</sup></td>
                            </tr>
                            <tr>
                                <td><i>F</i></td>
                                <td>a correction factor that has no units and ranges from 1.1 to 1.3 depending on <i>ESP<sub>f</sub></i> or <i>SAR<sub>f</sub></i></td>
                            </tr>
                            <tr>
                                <td><i>p</i></td>
                                <td>gypsum purity, unit: %</td>
                            </tr>
                        </tbody>
                    </table>
                    <hr>
                </div>

            </div>
        </div>


    </div>





    <footer class="navbar-default navbar-fixed-bottom">
        <div class="container-fluid">
            <p>
                &copy; <span class="dynamic-year"></span> <span id="fd">Department of Soil Science, <br />North Dakota State University.</span><br />
            </p>
        </div>
    </footer>
</body>
</html>
